<script type="text/x-red" data-template-name="german-holidays">
    <!--
        <div class="form-row">
            <label for="node-input-creds">Credentials</label>
            <input type="text" id="node-input-creds">
        </div>
    -->

    <div class="form-row">
        <label for="node-region"><i class="fa fa-globe"></i> state</label>
        <select type="text" id="node-input-region" style="width:70%;">
            <option value="ALL" >alle</option>
            <option value="BUND" >allgemeine</option>
            <option value="BW" >Baden-Württemberg</option>
            <option value="BY" >Bayern</option>
            <option value="BE" >Berlin</option>
            <option value="BB" >Brandenburg</option>
            <option value="HB" >Bremen</option>
            <option value="HH" >Hamburg</option>
            <option value="HE" >Hessen</option>
            <option value="MV" >Mecklenburg-Vorpommern</option>
            <option value="NI" >Niedersachsen</option>
            <option value="NW" >Nordrhein-Westfalen</option>
            <option value="RP" >Rheinland-Pfalz</option>
            <option value="SL" >Saarland</option>
            <option value="SN" >Sachsen</option>
            <option value="ST" >Sachsen-Anhalt</option>
            <option value="SH" >Schleswig-Holstein</option>
            <option value="TH" >Thüringen</option>
        </select>
    </div>

    <!-- By convention, most nodes have a 'name' property. The following div -->
    <!-- provides the necessary field. Should always be the last option      -->
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>

    <div class="form-tips"><b>Tip:</b> You can also define the region as part of the incomming message. This would be used priorized than the settings here. But then are the shortcuts (BY=Bayern, BE=Berlin) are used.<br />
        <code>msg.region</code> or <code>msg.payload.region</code>
    </div>
</script>


<!-- Next, some simple help text is provided for the node.                   -->
<script type="text/x-red" data-help-name="german-holidays">
    <body>
    <h3>About</h3>
    <p>Gets german holidays</p>

    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload
            <span class="property-type">any</span>
        </dt>
        <dd> the payload is not used. </dd>

        <dt>region <span class="property-type">region</span></dt>
        <dd> the region which should be used for getting holidays. Could also be defined in the configuration of the node. This property must be a string of two letters with the german state shortcut (BY=Bayern, BE=Berlin, ...).</dd>

        <dt class="optional">ts <span class="property-type">number</span></dt>
        <dd> defines a timestamp for the source of the data. if not defined today will be used.</dd>

        <dt class="optional">day <span class="property-type">number</span></dt>
        <dd> if defined only the Holiday information will get the relative to the timestamp (today by default). So if `msg.ts` is not defined, `msg.day = 0` is today, `msg.day = -1` is yesterday; `msg.day = 1` is tomorow, ...</dd>

        <dt class="optional">date <span class="property-type">Date</span></dt>
        <dd> if defined only the Holiday information for the defined date will given.</dd>
    </dl>

 <h3>Outputs</h3>
     <ol class="node-ports">
         <li>Standard output
             <dl class="message-properties">
                 <dt>payload <span class="property-type">object</span></dt>
                 <dd>if no `day` or `date` parameter is given, with a lot of holiday information</dd>
             </dl>
         </li>
     </ol>
     <h3>payload output properties</h3>
     <h4>day-object</h4>
     <dl class="message-properties">
            <dt>id <span class="property-type">string</span></dt>
            <dd> an if of the object (is the english name in upper case)</dd>

            <dt>day <span class="property-type">number</span></dt>
            <dd> the day of the week, where 1 is monday.</dd>

            <dt>month <span class="property-type">number</span></dt>
            <dd> the month of the day.</dd>

            <dt>year <span class="property-type">number</span></dt>
            <dd> the year of the day.</dd>

            <dt>date <span class="property-type">number</span></dt>
            <dd> the day as javascript date.</dd>

            <dt>dateString <span class="property-type">string</span></dt>
            <dd> the date of the day as string.</dd>

            <dt>name <span class="property-type">number</span></dt>
            <dd> name of the day (in german).</dd>

            <dt>isSunday <span class="property-type">boolean</span></dt>
            <dd> is true if the day is sunday.</dd>

            <dt>isSaturday <span class="property-type">boolean</span></dt>
            <dd> is true if the day is saturday.</dd>

            <dt>isSunday <span class="property-type">boolean</span></dt>
            <dd> is true if the day is sunday.</dd>

            <dt>isHoliday <span class="property-type">boolean</span></dt>
            <dd> is true if the day is an holiday.</dd>

            <dt>isWeekend <span class="property-type">boolean</span></dt>
            <dd> is true if the day is sunday or saturday.</dd>

            <dt>isSunOrHoliday <span class="property-type">boolean</span></dt>
            <dd> is true if the day is sunday or a holiday.</dd>

            <dt>isWeekendOrHoliday <span class="property-type">boolean</span></dt>
            <dd> is true if the day is sunday, saturday or a holiday.</dd>

        </dl>
        <h4>payload properties</h4>
     <dl class="message-properties">
             <dt>yesterday <span class="property-type">day-object</span></dt>
             <dd> day-object for the day before today.</dd>
 
             <dt>today <span class="property-type">day-object</span></dt>
             <dd> day-object for today.</dd>
 
             <dt>tomorrow <span class="property-type">day-object</span></dt>
             <dd> day-object for the day after today.</dd>
         </dl>
         <!-- 
                {"yesterday":
                {"id":"TUESDAY","day":2,"month":9,"year":2018,"date":"2018-10-22T22:00:00.000Z","dateString":"2018-10-23",
                "isSunday":false,
                "isSaturday":false,
                "dayOffset":-1,
                "isHoliday":false,
                "name":"Dienstag",
                "isWeekend":false,
                "isSunOrHoliday":false,
                "isWeekendOrHoliday":false},
                "today":           {"id":"WEDNESDAY","day":3,"month":9,"year":2018,"date":"2018-10-26T22:00:00.000Z","dateString":"2018-10-24","isSunday":false,"isSaturday":false,"isHoliday":false,"name":"Mittwoch","isWeekend":false,"isSunOrHoliday":false,"isWeekendOrHoliday":false,"isBetweenSundayAndHoliday":false,"isBetweenHolidayAndSaturday":false,"isBetweenWeekendOrHoliday":false},
                "tomorrow":        {"id":"THURSDAY", "day":4,"month":9,"year":2018,"date":"2018-10-24T22:00:00.000Z","dateString":"2018-10-25","isSunday":false,"isSaturday":false,"dayOffset":1,"isHoliday":false,"name":"Donnerstag","isWeekend":false,"isSunOrHoliday":false,"isWeekendOrHoliday":false,"isBetweenSundayAndHoliday":false,"isBetweenHolidayAndSaturday":false,"isBetweenWeekendOrHoliday":false},
                "dayAfterTomorrow":{"id":"FRIDAY",   "day":5,"month":9,"year":2018,"date":"2018-10-25T22:00:00.000Z","dateString":"2018-10-26","isSunday":false,"isSaturday":false,"dayOffset":2,"isHoliday":false,"name":"Freitag","isWeekend":false,"isSunOrHoliday":false,"isWeekendOrHoliday":false},
                "hollidays":[{"id":"NEUJAHRSTAG","name":"Neujahrstag","day":0,"month":11,"year":2017,"date":"2017-12-31T23:00:00.000Z","dateString":"2018-01-01"},{"id":"KARFREITAG","name":"Karfreitag","day":4,"month":2,"year":2018,"date":"2018-03-29T22:00:00.000Z","dateString":"2018-03-30"},{"id":"OSTERMONTAG","name":"Ostermontag","day":0,"month":3,"year":2018,"date":"2018-04-01T22:00:00.000Z","dateString":"2018-04-02"},{"id":"TAG_DER_ARBEIT","name":"Tag der Arbeit","day":1,"month":3,"year":2018,"date":"2018-04-30T22:00:00.000Z","dateString":"2018-05-01"},{"id":"CHRISTIHIMMELFAHRT","name":"Christi Himmelfahrt","day":3,"month":4,"year":2018,"date":"2018-05-09T22:00:00.000Z","dateString":"2018-05-10"},{"id":"PFINGSTMONTAG","name":"Pfingstmontag","day":0,"month":4,"year":2018,"date":"2018-05-20T22:00:00.000Z","dateString":"2018-05-21"},{"id":"DEUTSCHEEINHEIT","name":"Tag der Deutschen Einheit","day":2,"month":9,"year":2018,"date":"2018-10-02T22:00:00.000Z","dateString":"2018-10-03"},{"id":"REFORMATIONSTAG","name":"Reformationstag","day":2,"month":9,"year":2018,"date":"2018-10-30T23:00:00.000Z","dateString":"2018-10-31"},{"id":"BUBETAG","name":"Buß- und Bettag","day":2,"month":10,"year":2018,"date":"2018-11-20T23:00:00.000Z","dateString":"2018-11-21"},{"id":"ERSTERWEIHNACHTSFEIERTAG","name":"1. Weihnachtstag","day":1,"month":11,"year":2018,"date":"2018-12-24T23:00:00.000Z","dateString":"2018-12-25"},{"id":"ZWEITERWEIHNACHTSFEIERTAG","name":"2. Weihnachtstag","day":2,"month":11,"year":2018,"date":"2018-12-25T23:00:00.000Z","dateString":"2018-12-26"}],"hollidaysNum":[1514761200000,1522360800000,1522620000000,1525125600000,1525903200000,1526853600000,1538517600000,1540940400000,1542754800000,1545692400000,1545778800000],"next":{"holliday":{"id":"REFORMATIONSTAG","name":"Reformationstag","day":2,"month":9,"year":2018,"date":"2018-10-30T23:00:00.000Z","dateString":"2018-10-31"},"hollidayDiff":8,"weekendOrHolidayDiff":3,"weekendOrHoliday":{"id":"SATURDAY","name":"Samstag","day":5,"month":9,"year":2018,"date":"2018-10-26T22:00:00.000Z","dateString":"2018-10-27"}}}
         -->
     <h3>Details</h3>
     <p>tbd</p>
     <h3>References</h3>
    <ul>
		<li><a href="https://github.com/Hypnos3/node-red-contrib-german-holidays">GitHub</a> - the nodes github repository</li>
    </ul>
</body>
</script>

<!-- Finally, the node type is registered along with all of its properties   -->
<!-- The example below shows a small subset of the properties that can be set-->
<script type="text/javascript">
    RED.nodes.registerType('german-holidays', {
        category: 'function',
        defaults: {
            name: {
                value: "",
                required: false
            },
            region: {
                value: "",
                required: true
            },
        },
        inputs: 1, // set the number of inputs - only 0 or 1
        outputs: 1, // set the number of outputs - 0 to n
        icon: "default.png", // saved in  icons/myicon.png - myicon.png
        color: "#FFFF00",
        label: function () {
            return this.name || "Holidays";
        },
        labelStyle: function () {
            return this.name ? "node_label_italic" : "";
        },
        paletteLabel: "Holidays"
    });
</script>